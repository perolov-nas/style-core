@use 'variables' as *;

@mixin article {
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-start;
    align-items: flex-start;
    flex-direction: column;
    gap: calc($gap / 2);
    height: auto;
    position: relative;
    container-type: inline-size;
    container-name: article-card;

    figure {
          overflow: hidden;
          width: 100%;
          aspect-ratio: 16/10;
          border-radius: $border-radius-default;

          img {
                width: 100%;
                height: auto;
                aspect-ratio: 16/10;
                object-fit: cover;
                object-position: center;
                transition: all 0.2s ease;
          }
    }

    .event-content,
    .post-content,
    .news-content,
    .content-wrapper {
          display: flex;
          width: 100%;
          gap: calc($gap / 4);
          flex-direction: column;
          height: auto;
          width: 100%;

          .event-meta,
          .news-meta {
                display: flex;
                flex-direction: column;
                
                .event-types,
                .news-areas {
                      display: flex;
                      flex-wrap: wrap;
                      gap: calc($gap / 4);
                      
                      .event-type,
                      .news-area {
                            // color: var(--color-text);
                      }

                      .news-area {
                            @include badge;
                      }
                }
                
                .event-date,
                .news-date {
                      // color: var(--color-text);
                }

                .event-date {
                      @include badge;
                }

          }

          .post-title,
          .event-title,
          .news-title {
                font-size: var(--h4-size);
                // color: var(--color-text);
                font-weight: 600;
                position: relative;
                transition: all 0.2s ease;
          }

          p {
                // color: var(--color-text);
          }

          time {
                // color: var(--color-text);
          }
    }

    &:hover {
          figure {
                img {
                      transform: scale(1.05);
                }
          }
    }
}

@mixin link {
    color: var(--link-color);
    transition: all 0.2s ease;
    
    &:hover {
          color: var(--link-hover-color);
          
          h3, h4, h5, p {
                text-decoration: underline;
                text-decoration-color: var(--link-hover-color);
                text-decoration-thickness: 1px;
                text-underline-offset: 2px;
          }
    }
}

@mixin badge {
    position: absolute;
    top: calc($unit * -0.5);
    left: calc($unit * 0.5);
    z-index: 1;
    background-color: var(--wp--preset--color--guld-50);
    color: var(--color-text-black);
    font-weight: 600;
    font-size: clamp(0.875rem, 5cqi, var(--h5-size));
    padding: calc($unit / 4) calc($unit / 1.15);
    border-radius: $border-radius-default;
    transform: rotate(-2.5deg);

    &.badge-alt {
          transform: rotate(0deg);
          left: initial;
          right: calc($unit * 1);
          top: calc($unit * 1);
          background-color: var(--wp--preset--color--kalk-100);
          color: var(--wp--preset--color--offblack);

    }
}

.wrapper a {
    @include link;
}

@mixin button {
    // general button styling
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: auto;
    gap: calc($unit / 2);
    cursor: pointer;
    text-decoration: none;
    border-radius: 100px;
    padding: calc($unit / 2) calc($unit * 1);
    transition: all 0.2s ease;
    border: 2px solid var(--box-border);
    position: relative;
    letter-spacing: 0.01em;
    text-underline-offset: 4px;
    font-size: var(--body-size);

    &.tranas-image-upload__btn--select {
          color: var(--submit-color-text);
    }
    
    // Tillgänglighet: minsta touch target enligt WCAG 2.5.5
    min-height: 44px;
    min-width: 44px;

    &:hover {
          outline: 2px solid var(--box-border-hover);
          outline-offset: 2px;
          transform: scale(1.02) translateY(-1px);
    }

    // Tillgänglighet: tydlig fokusindikator för tangentbordsnavigering
    &:focus-visible {
          outline: 3px solid var(--box-border-hover, currentColor);
          outline-offset: 3px;
    }

    // Ta bort outline vid musklick men behåll vid tangentbord
    &:focus:not(:focus-visible) {
          outline: none;
    }

    // Fallback för äldre webbläsare som inte stödjer :focus-visible
    &:focus {
          outline: 2px solid var(--box-border-hover);
          outline-offset: 2px;
    }

    // Tillgänglighet: respektera reduced motion
    @media (prefers-reduced-motion: reduce) {
          transition: none;
          
          &:hover {
                transform: none;
          }
    }
}

@mixin tranas-form {
    * {
        box-shadow: 0 0 0 1px blue;
    }
}
.tranas-form {
    @include tranas-form;
}